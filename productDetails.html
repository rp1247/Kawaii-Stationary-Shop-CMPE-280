<!DOCTYPE html>
<html>
	<script>
		function getUrlVars() {
			var vars = {};
			var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
				vars[key] = value;
			});
			return vars;
		}
		let myFetch = fetch("http://localhost:5000/products");
			
		myFetch.then(function(response) {
		response.text().then(function(data) 
		{
			products = JSON.parse(data);
			console.log(getUrlVars()["id"]);
			var selectedProduct = products[products.map(function (item) { return item.id; }).indexOf(getUrlVars()["id"])];
			console.log(selectedProduct);
			document.getElementById("ProductTitle").innerHTML = selectedProduct.details.name;
			document.getElementById("ProductDescription").innerHTML = selectedProduct.details.description;
			document.getElementById("ProductPrice").innerHTML = selectedProduct.details.price;
			document.getElementById("productImg").innerHTML = 	'<figure class="image">' + 
																'<img id="productImg"' + 
																'src="' + 
																'images/resource/' + selectedProduct.details.img +'"' + 
																'alt="">' +
																'</figure>'
		}
		);
		});

	</script>
<head>
<meta charset="utf-8">
<title>Kawaii Stationary Shop</title>
<!-- Stylesheets -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      

<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" >
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
<link rel="icon" href="images/favicon.png" type="image/x-icon">
<!-- Responsive -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link href="css/responsive.css" rel="stylesheet">
<!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]-->
<!--[if lt IE 9]><script src="js/respond.js"></script><![endif]-->


<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

<style>
	

        div.stars {
          width: 27%;
          display: inline-block;
        }

        input.star { display: none; }

        label.star {
          float: right;
          padding: 10px;
          font-size: 48px;
          color: #444;
          transition: all .2s;
        }

        input.star:checked ~ label.star:before {
          content: '\f005';
          color: #FD4;
          transition: all .25s;
        }

        input.star-5:checked ~ label.star:before {
          color: #FE7;
          text-shadow: 0 0 20px #952;
        }

        input.star-1:checked ~ label.star:before { color: #F62; }

        label.star:hover { transform: rotate(-15deg) scale(1.3); }

        label.star:before {
          content: '\f006';
          font-family: FontAwesome;
        }

        .textbox {
        	/*width: 70%;*/
        	overflow: hidden;
        	font-size: 20px;
        	padding-top: 8px 0;
        	margin: 8px 0;
        	border-bottom: 1px solid #4caf50;

        }

        .material-icons {
        	font-size: 14px;
        }

        .btn-style-seven {
        	font-size: 16px;
        }

        .collection .collection-item.avatar {
		    min-height: 84px;
		    padding-left: 72px;
		    position: relative;
		}

        .collection .collection-item {
		    /*background-color: #eff2f4;*/
		    background-color: #f5f5f5;
		    line-height: 1.5rem;
		    padding: 10px 20px;
		    margin: 0;
		    border-bottom: 1px solid #e0e0e0;
		}

		.collection .collection-item.avatar:not(.circle-clipper)>.circle, .collection .collection-item.avatar :not(.circle-clipper)>.circle {
		    position: absolute;
		    width: 42px;
		    height: 42px;
		    overflow: hidden;
		    left: 15px;
		    display: inline-block;
		    vertical-align: middle;
		}

		.collection .collection-item.avatar i.circle {
		    font-size: 18px;
		    line-height: 42px;
		    color: #fff;
		    background-color: #999;
		    text-align: center;
		}

		.circle {
		    border-radius: 50%;
		}


      </style>
	
</head>

<body>

<div class="page-wrapper">
 	
    <!-- Preloader -->
    <div class="preloader"></div>
 	
    <!-- Main Header-->
    <header class="main-header alternate">
    	
        <!-- Main Box -->
    	<div class="main-box">
        	<div class="auto-container">
            	<div class="outer-container clearfix">
                    <!--Logo Box-->
                    <div class="logo-box">
                        <div class="logo"><a href="index.html"><img src="images/logo.png" alt=""></a></div>
                    </div>
                    
                    <!--Nav Outer-->
                    <div class="nav-outer clearfix">
                        <!-- Main Menu -->
                        <nav class="main-menu">
                        
                            <div class="navbar-header">
                                <!-- Toggle Button -->    	
                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                            </div>
                            
                            <div class="navbar-collapse collapse scroll-nav clearfix">
                                <ul class="navigation clearfix">
                                    <li class="dropdown"><a href="index.html">Home</a></li> 
                                    <li class="dropdown"><a href="products.html">Products</a></li>  
                                    <li class="dropdown"><a href="logout.html">Logout</a></li>                                      
                                 </ul>
                            </div>
                            
                        </nav>
                        <!-- Main Menu End-->
                        
                        <!--Other Links-->
                        <!-- <div class="other-links">
                        	<a href="#" class="theme-btn btn-style-one">Free Trial</a>
                        </div>
                         -->
                    </div>
                    <!--Nav Outer End-->
                    
            	</div>    
            </div>
        </div>
    
    </header>
    <!--End Main Header -->
    
    
    <!--Main Banner / Banner Two-->
    <section class="main-banner banner-two" id="banner" ">
    	<div class="auto-container">
            	<!--Text Column-->
                <div class="text-column col-md-5 col-sm-12 col-xs-12">
                	<div class="inner">
                    	<h4>Get it!</h4>
                        <h2 id="ProductTitle">Title</h2>
                        <p  id="ProductDescription">Description</p>

                        <p>Price: $ <b id="ProductPrice">10</b></p>

                        

                    </div>
                </div>


                
                <!--Image Column-->
                <div class="image-column col-md-7 col-sm-12 col-xs-12">
                	<div class="inner text-right" id="productImg">
                    	<figure class="image"><img id="productImg" src="images/resource/CartoonCableProtector.jpeg" alt=""></figure>
                    </div>
                </div>
                

        </div>
    </section>
  	<!--End Main Banner--> 

  	<!-- Review -->
	<section class="main-banner" id="banner" ">
    	<div class="auto-container">
        	<div class="row clearfix">
        		<div class="centered">
                <h2>Add a Review</h2>
                <!-- <div class="desc-text">Get the latest kawaii stationary's <br>Improve your collection.</div> -->
            	</div>
            	<br>
        		<!-- <div class="box">
        			<a class="ion-android-star b1" href="" title=""></a>
        			<a class="ion-android-star b2" href="" title=""></a>
        			<a class="ion-android-star b3" href="" title=""></a>
        			<a class="ion-android-star b4" href="" title=""></a>
        			<a class="ion-android-star b5" href="" title=""></a>
        		</div> -->
        		<!--<div class="rating">
            			<label for="star1"><input type="radio" name="star" id="star1"></label>
            			<label for="star2"><input type="radio" name="star" id="star2"></label>
            			<label for="star3"><input type="radio" name="star" id="star3"></label>
            			<label for="star4"><input type="radio" name="star" id="star4"></label>
            			<label for="star5"><input type="radio" name="star" id="star5"></label>
            		</div> -->	

            	<form class="col s12" accept-charset="utf-8">

                    <input type="hidden" name="api" value="add_rating_review"/>
                    <input type="hidden" name="product_id" value="product_id"/>
                    <input type="hidden" name="product_avg_rating" value="product_abg_rating"/>
                    <input type="hidden" name="product_total_rating" value="product_total_ratings"/>
                   <!-- <input type="hidden" name="product_review" value=""/> -->

                   <!-- <input type="hidden" name="product_given_rating" value=""/> -->


        		    <!-- Star Input -->
        		    <div class="stars">
					    <input class="star star-5" id="star-5" type="radio" name="product_given_rating" value="5" />
					    <label class="star star-5" for="star-5"></label>
					    <input class="star star-4" id="star-4" type="radio" name="product_given_rating" value="4" />
					    <label class="star star-4" for="star-4"></label>
					    <input class="star star-3" id="star-3" type="radio" name="product_given_rating" value="3" />
					    <label class="star star-3" for="star-3"></label>
					    <input class="star star-2" id="star-2" type="radio" name="product_given_rating" value="2" />
					    <label class="star star-2" for="star-2"></label>
					    <input class="star star-1" id="star-1" type="radio" name="product_given_rating" value="1" />
					    <label class="star star-1" for="star-1"></label>
					</div> 

					<br>
					<br>

					<!-- Review Input -->
					<div class="textbox">
						<i class="fa fa-pencil" aria-hidden="true"></i>
						<input type="text" placeholder="Review" name="product_review" size="88">
					</div>

					<br>
					<br>
					
					<!-- Send Button -->
					<div class="blog-section wow tada" id="products" data-wow-delay="0ms" data-wow-duration="1500ms">
						<button class="theme-btn btn-style-seven" type="submit" name="Review">
							Post Review 
					       <i class="material-icons">send</i>
						</button>
						<br>
					</div>            		
            	</form>             				
            </div>
        </div>
    </section>


    <!-- Costumer Reviews and Ratings -->
<!-- 
    <section class="main-banner banner-two" id="banner" ">
    	<div class="auto-container">
        	<div class="row clearfix">
        		<div class="centered">
                	<h2>	<?php 
                    echo $result['data']['p_total_reviews'];
                    ?>	Customer Reviews 	</h2>
                	<h4>Average Customer Review</h4>
                	
             		<?php

                    $integer_rating = intval($result['data']['p_avg_rating']);

                    $float_remainder = fmod($result['data']['p_avg_rating'],1);

            		for($i=0;$i<$integer_rating;$i++){
					      echo "<i class=\"material-icons\">star</i>";
					}
					$flag = false;
					if($float_remainder<=0.5 && $float_remainder>0.00){
					      echo "<i class=\"material-icons\">star_half</i>";
					      $flag=true;
					}
					else if($float_remainder>0.5){
					      echo "<i class=\"material-icons\">star</i>";
					      $flag=true;
					}
					if($flag==true){
					for($i=0;$i<(4-$integer_rating);$i++){
					      echo "<i class=\"material-icons\">star_border</i>"; 
					}
					}
					else{
					  for($i=0;$i<(5-$integer_rating);$i++){
					      echo "<i class=\"material-icons\" >star_border</i>"; 
					}
					}
					  echo "<div class=\"\">".$result['data']['p_avg_rating']."<span> out of 5 stars</span></div>";
					
					?>
            	</div>

            	<div class="container">
            		<ul class="collection">
            			<?php
                            //print_r(count($result['data']['reviews']));
                           for ($i=0; $i <count($result['data']['reviews']); $i++) { 
                                        
                        ?>
            			<li class="collection-item avatar">
            				<i class="material-icons circle" style="font-size: 24px;">person</i>
            				<span class="title"> <?php echo $result['data']['reviews'][$i]['fb_fname']; ?> </span>
                            <span class="title"> <?php echo $result['data']['reviews'][$i]['fb_lname']; ?> </span>
            				<br><br>
            				<?php 
            					for($j=0;$j<$result['data']['reviews'][$i]['rating'];$j++){
            				?>
            					<i class="material-icons">star</i>
            				<?php 
            					}
            				?>

            				<?php 
            					for($k=0;$k< 5 - $result['data']['reviews'][$i]['rating'];$k++){
            				?>
            					<i class="material-icons">star_border</i>
            				<?php 
            					}
            				?>

            				<br><br>
            				<p><span><?php echo $result['data']['reviews'][$i]['review']; ?></span><br></p>

                            <br>
                            <p><span><?php echo $result['data']['reviews'][$i]['timestamp']; ?></span><br></p>
            			</li>

            			<?php
            				}
            			?>

            		</ul>
            	</div>

            </div>
        </div>
    </section>
 -->
    
    <!--Footer Style Two-->
    <footer class="footer-style-two">
        <!--Footer Upper-->
        <div class="footer-upper">
            <div class="auto-container">
                <div class="outer-box">
                    <div class="row clearfix">
                        
                        
                        
                        <!--Big Column-->
                        <div class="big-column col-lg-12 col-md-12 col-sm-12 col-xs-12">    
                            <div class="row clearfix">
                            
                                <!--Footer Column-->
                                <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                                    <div class="footer-widget newsletter-widget">
                                        <div class="widget-inner">
                                            
                                            <div class="logo"><img src="images/footer-logo.png" alt=""></div>
                                            
                                            
                                        </div>
                                    </div>
                                </div>
                                <!--Footer Column-->
                                <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                                    <div class="footer-widget newsletter-widget">
                                        <div class="widget-inner">
                                            <div class="copyright">Copyright &copy;2020, Kawaii Stationary Shop</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        
    </footer>
    
</div>
<!--End pagewrapper-->

<!--Scroll to top-->
<div class="scroll-to-top scroll-to-target" data-target="html"><span class="fa fa-angle-double-up"></span></div>


<script src="js/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script>
<script src="js/pagenav.js"></script>
<script src="js/jquery.scrollTo.js"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/owl.js"></script>
<script src="js/wow.js"></script>

<script src="js/script.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      <script type="text/javascript">
         $('#textarea1').val('New Text');
         M.textareaAutoResize($('#textarea1'));
      </script>


</body>
</html>